@page "/"

<div class="row justify-content-center">
	<div class="col-12 col-md-4 text-center">
		<div class="animationContainer">
			<div class=@($"counterDisplay {_counterClass}")>
				Current Count : @_currentCount
			</div>
		</div>
		<button class="btn btn-primary" @onclick="IncrementCount" disabled=@(_buttonDisabled ? "disabled" : null)>Increment Counter</button>
		<div class="mt-5">
			<p>Find out more and read the blog post here : 
				<a href="https://www.minneapolchris.com/using-css-animations-in-blazor/">https://www.minneapolchris.com/using-css-animations-in-blazor/</a>
			</p>
		</div>
	</div>
</div>

<style>
	.animationContainer {
		perspective: 1200px;
	}

	.counterDisplay {
		background-color: orange;
		border: 2px solid blue;
		width: 100%;
		height: 200px;
		color: blue;
		text-align: center;
		padding-top: 90px;
		margin-bottom: 50px;
	}

	.updating {
		animation: spin 2s;
	}

	@@keyframes spin {
		from {
			transform: rotateY(0);
		}

		to {
			transform: rotateY(360deg);
		}
	}
</style>

@code {
	private int _currentCount = 0;

	private string _counterClass;

	private bool _buttonDisabled = false;

	private async Task IncrementCount()
	{
		_buttonDisabled = true;
		_counterClass = "updating";
		await Task.Delay(1000);
		_currentCount++;
		StateHasChanged();
		await Task.Delay(1000);
		_buttonDisabled = false;
		_counterClass = "";
	}
}
